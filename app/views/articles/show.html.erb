<div class="article-view container-fluid">
  <div class="row">
    <div class="col-3 d-none d-lg-block style-important content">
      <div class="article-info">
        <h4>Article info</h4>
        <ul>
          <li>
            <% if @article.guest_author? %>
            Author: <%= @article.user.username %></a>
            <% else %>
            Author: <a href="<%= user_path(@writer) %>"><%= @article.user.username %></a>
            <% end %>
          </li>
          <li>
            Accepted at: <%= @article.created_at%>
          </li>
          <li>
            Updated at: <%= @article.updated_at%>
          </li>
        </ul>
      </div>
      <div class="outline">
        <h4>Outline</h4>
        <%= toc(@article.content) %>
      </div>
    </div>
    <div class="col-lg-9 content">
      <div class="article-main">
        <div class="article-header">
          <ul class="nav justify-content-end">
            <li class="nav-item">
              <%= link_to "編集", edit_article_path(@article), class: "nav-link" %>
            <li class="nav-item">
              <%= link_to "削除", article_path(@article), method: :delete,  class: "nav-link" %>
            </li>
            <li class="nav-item">
              <a class="nav-link"
                href="<%= TweetUriEncord(text: @article.title, url: request.url, hashtags: "mdClip") %>" target=_blank
                rel=noopner><i class="fab fa-twitter-square fa-2x"></i></a>
            </li>
            <li class="nav-item">
              <i class="nav-link far fa-clipboard fa-2x" id="copy-url"
                data-clipboard-text="<%= "#{@article.title} #{request.url}" %>"></i>
            </li>
          </ul>
        </div>
        <h1><%= @article.title %></h1>
        <p>
          <%= markdown(@article.content) %>
        </p>
      </div>
    </div>
  </div>

</div>
<script>
  var clipboard = new ClipboardJS('#copy-url');

  clipboard.on('success', function (e) {
    console.log(e);
  });

  clipboard.on('error', function (e) {
    console.log(e);
  });
</script>